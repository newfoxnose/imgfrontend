import{m as F}from"./md5-9ddf245e.js";import{_ as v,d as b,r as p,o as y,c as S,a as t,w as i,F as k,b as l,k as $,g as c,h as x,m as u,q as I,s as V,f as j}from"./index-a30e8698.js";const C=b({setup(){const a=l(!1),{proxy:n}=x(),d=l([]);return $(()=>{let o=new URLSearchParams;o.append("token",$cookies.get("token")),o.append("timestamp",new Date().getTime()),n.$http.post("/ajax/get_profile_ajax/",o).then(e=>{e.data.code=="401"&&(window.location.href="/login"),d.value=e.data.data})}),{formState:d,onFinish:o=>{a.value=!0;let e=new URLSearchParams;e.append("token",$cookies.get("token")),e.append("timestamp",new Date().getTime()),e.append("current_pwd",F(o.current_pwd)),e.append("domain",o.domain),n.$http.post("/ajax/update_domain_ajax/",e).then(s=>{d.value=s.data.data,s.data.msg!=""&&(a.value=!1,s.data.msg!="修改成功!"?u.error(s.data.msg):u.success(s.data.msg))})},onFinishFailed:o=>{console.log("Failed:",o)},iconLoading:a}}}),D=a=>(I("data-v-08b1527c"),a=a(),V(),a),L=D(()=>j("div",{style:{"margin-top":"15px"}},null,-1));function U(a,n,d,_,f,o){const e=p("a-input"),s=p("a-typography-paragraph"),r=p("a-form-item"),g=p("a-input-password"),h=p("a-button"),w=p("a-form");return y(),S(k,null,[L,t(w,{model:a.formState,name:"basic","label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off",onFinish:a.onFinish,onFinishFailed:a.onFinishFailed},{default:i(()=>[t(r,{label:"域名",name:"domain"},{default:i(()=>[t(e,{value:a.formState.domain,"onUpdate:value":n[0]||(n[0]=m=>a.formState.domain=m),suffix:"开头不带协议，结尾不带/"},null,8,["value"]),t(s,null,{default:i(()=>[c("请为此域名添加一条cname记录指向cname.gm.ws")]),_:1})]),_:1}),t(r,{label:"现密码",name:"current_pwd",rules:[{required:!0,message:"现密码不能为空"}]},{default:i(()=>[t(g,{value:a.formState.current_pwd,"onUpdate:value":n[1]||(n[1]=m=>a.formState.current_pwd=m)},null,8,["value"])]),_:1}),t(r,{"wrapper-col":{offset:6,span:18}},{default:i(()=>[t(h,{type:"primary","html-type":"submit",loading:a.iconLoading},{default:i(()=>[c("提交")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","onFinish","onFinishFailed"])],64)}const T=v(C,[["render",U],["__scopeId","data-v-08b1527c"]]);export{T as default};
