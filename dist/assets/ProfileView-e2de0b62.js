import{m as q}from"./md5-9ddf245e.js";import{_ as b,d as k,r as i,o as F,c as y,a,w as r,F as c,b as m,k as U,g as f,h,m as _,q as C,s as $,f as E}from"./index-a30e8698.js";const I=k({setup(){const e=m(!1),{proxy:t}=h(),p=m([]);return U(()=>{let s=new URLSearchParams;s.append("token",$cookies.get("token")),s.append("timestamp",new Date().getTime()),t.$http.post("/ajax/get_profile_ajax/",s).then(l=>{l.data.code=="401"&&(window.location.href="/login"),p.value=l.data.data})}),{formState:p,onFinish:s=>{e.value=!0;let l=new URLSearchParams;l.append("token",$cookies.get("token")),l.append("timestamp",new Date().getTime());for(var n in s)s[n]==null&&(s[n]=""),n=="current_pwd"||n=="pwd"||n=="pwd_repeat"?l.append(n,q(s[n])):l.append(n,s[n]);t.$http.post("/ajax/update_profile_ajax/",l).then(u=>{p.value=u.data.data,u.data.msg!=""&&(e.value=!1,u.data.msg!="修改成功!"?_.error(u.data.msg):_.success(u.data.msg))})},onFinishFailed:s=>{console.log("Failed:",s)},iconLoading:e}}}),T=e=>(C("data-v-aa036d5e"),e=e(),$(),e),V=T(()=>E("div",{style:{"margin-top":"15px"}},null,-1));function j(e,t,p,v,g,s){const l=i("a-input"),n=i("a-form-item"),u=i("a-typography-paragraph"),d=i("a-input-password"),S=i("a-button"),w=i("a-form");return F(),y(c,null,[V,a(w,{model:e.formState,name:"basic","label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off",onFinish:e.onFinish,onFinishFailed:e.onFinishFailed},{default:r(()=>[a(n,{label:"昵称",name:"name",rules:[{required:!0,message:"昵称不能为空"}]},{default:r(()=>[a(l,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=o=>e.formState.name=o)},null,8,["value"])]),_:1}),a(n,{label:"邮箱",name:"email",rules:[{required:!0,message:"邮箱不能为空"}]},{default:r(()=>[a(l,{value:e.formState.email,"onUpdate:value":t[1]||(t[1]=o=>e.formState.email=o)},null,8,["value"])]),_:1}),a(n,{label:"七牛域名",name:"qiniu_domain",rules:[{required:!1}]},{default:r(()=>[a(l,{value:e.formState.qiniu_domain,"onUpdate:value":t[2]||(t[2]=o=>e.formState.qiniu_domain=o),suffix:"开头带协议，结尾不带/"},null,8,["value"]),a(u,null,{default:r(()=>[f("推荐专门新注册一个七牛账号使用，以免泄密，有10G免费空间和每月10G免费http流量。")]),_:1})]),_:1}),a(n,{label:"七牛ACCESSKEY",name:"qiniu_accesskey",rules:[{required:!1}]},{default:r(()=>[a(l,{value:e.formState.qiniu_accesskey,"onUpdate:value":t[3]||(t[3]=o=>e.formState.qiniu_accesskey=o)},null,8,["value"])]),_:1}),a(n,{label:"七牛SECRETKEY",name:"qiniu_secretkey",rules:[{required:!1}]},{default:r(()=>[a(l,{value:e.formState.qiniu_secretkey,"onUpdate:value":t[4]||(t[4]=o=>e.formState.qiniu_secretkey=o)},null,8,["value"])]),_:1}),a(n,{label:"七牛BUCKET",name:"qiniu_bucket",rules:[{required:!1}]},{default:r(()=>[a(l,{value:e.formState.qiniu_bucket,"onUpdate:value":t[5]||(t[5]=o=>e.formState.qiniu_bucket=o)},null,8,["value"])]),_:1}),a(n,{label:"新密码（不修改请留空）",name:"pwd",rules:[{required:!1}]},{default:r(()=>[a(d,{value:e.formState.pwd,"onUpdate:value":t[6]||(t[6]=o=>e.formState.pwd=o)},null,8,["value"])]),_:1}),a(n,{label:"重复新密码（不修改请留空）",name:"pwd_repeat",rules:[{required:!1}]},{default:r(()=>[a(d,{value:e.formState.pwd_repeat,"onUpdate:value":t[7]||(t[7]=o=>e.formState.pwd_repeat=o)},null,8,["value"])]),_:1}),a(n,{label:"现密码",name:"current_pwd",rules:[{required:!0,message:"现密码不能为空"}]},{default:r(()=>[a(d,{value:e.formState.current_pwd,"onUpdate:value":t[8]||(t[8]=o=>e.formState.current_pwd=o)},null,8,["value"])]),_:1}),a(n,{"wrapper-col":{offset:6,span:18}},{default:r(()=>[a(S,{type:"primary","html-type":"submit",loading:e.iconLoading},{default:r(()=>[f("提交")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","onFinish","onFinishFailed"])],64)}const P=b(I,[["render",j],["__scopeId","data-v-aa036d5e"]]);export{P as default};
