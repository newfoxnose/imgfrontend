import{a as r,A as L,d as T,i as E,m as C,_ as U,r as m,o as n,c as d,w as o,k as _,F as h,j as I,f as v,t as Q,l as g,e as c}from"./index-dbff6c52.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};const $=J;function P(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),i.forEach(function(p){R(e,p,a[p])})}return e}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=function(t,a){var i=P({},t,a.attrs);return r(L,P({},i,{icon:$}),null)};S.displayName="HomeOutlined";S.inheritAttrs=!1;const Z=S;var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const z=q;function D(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),i.forEach(function(p){V(e,p,a[p])})}return e}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=function(t,a){var i=D({},t,a.attrs);return r(L,D({},i,{icon:z}),null)};O.displayName="PlusCircleOutlined";O.inheritAttrs=!1;const X=O,Y="data:image/png;base64,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";$cookies.get("login")!="yes"&&(window.location.href="/login");const G=T({components:{HomeOutlined:Z,PlusCircleOutlined:X},setup(){const e=E(!1),t=E(!1),a=E(!1),i=E(!1);return{visible:e,showDrawer:()=>{e.value=!0},closeDrawer:()=>{e.value=!1},prompt_visible:t,show_prompt:()=>{t.value=!0},hide_prompt:()=>{t.value=!1},movebookmark_drawer_visible:i,show_movebookmark_drawer:()=>{i.value=!0},close_movebookmark_drawer:()=>{i.value=!1},empty_prompt_visible:a,show_empty_prompt:()=>{a.value=!0},hide_empty_prompt:()=>{a.value=!1}}},data(){return{folder_name:"",father_id:"",folder_id:"",folder_data:[{key:"",name:"",lv:"",value:"",disabled:!1}],data:[],columns:[{title:"lv",dataIndex:"lv"},{title:"目录名称",dataIndex:"name"},{title:"书签数量",dataIndex:"amount"},{title:"操作"}],columns_addnew:[{title:"添加目录"},{title:"目录名称"},{title:"父目录"},{title:"操作"}],data_addnew:[{}],new_folder_name:"",new_father_id:"根目录"}},methods:{editFolder(e,t,a){this.folder_name=t,this.folder_id=e,this.father_id=a;for(var i=!1,p=0,f=0;f<this.data.length;f++)this.folder_data[f]=this.data[f],this.data[f].value==e?(i=!0,this.folder_data[f].disabled=!0):i==!1?this.folder_data[f].disabled=!1:this.data[f].lv>p?this.folder_data[f].disabled=!0:(this.folder_data[f].disabled=!1,i=!1),p=this.data[f].lv;this.showDrawer(),console.log(this.data)},deleteFolder(e){this.show_prompt(),this.folder_id=e},moveBookmark(e){this.show_movebookmark_drawer(),this.folder_id=e,this.father_id=e},emptyFolder(e){this.show_empty_prompt(),this.folder_id=e},submitModify(e){if(console.log("folder_id:"+this.folder_id),e=="修改"&&(this.folder_id==""||this.folder_name==""||this.father_id==""))C.info("请填写必要项目");else if(e!="修改"&&this.folder_id=="")C.info("请填写必要项目");else{let t=new URLSearchParams;t.append("folder_id",this.folder_id),t.append("folder_name",this.folder_name),t.append("father_id",this.father_id),t.append("teacher_id",$cookies.get("teacher_id")),t.append("login",$cookies.get("login")),t.append("level",$cookies.get("level"));let a="";e=="修改"?a="/ajax/edit_folder_ajax/update_folder":e=="删除"?a="/ajax/edit_folder_ajax/delete_folder":e=="移动"?a="/ajax/edit_folder_ajax/move_bookmark":e=="清空"&&(a="/ajax/edit_folder_ajax/empty_folder"),this.$http.post(a,t).then(i=>{console.log(i.data),C.info(i.data.msg),i.data.data==!0&&(this.load_data(),this.closeDrawer(),this.hide_prompt(),this.close_movebookmark_drawer(),this.hide_empty_prompt())}).catch(i=>{console.log(i)})}},newFolder(){if(this.new_folder_name!=""&&this.new_father_id!=""){let e=new URLSearchParams;e.append("new_folder",this.new_folder_name),e.append("folder_id",this.new_father_id),e.append("teacher_id",$cookies.get("teacher_id")),e.append("login",$cookies.get("login")),e.append("level",$cookies.get("level")),this.$http.post("/ajax/new_folder_ajax",e).then(t=>{console.log(t.data),C.info(t.data.msg),t.data.inserted_id!=null&&this.load_data()}).catch(t=>{console.log(t)})}else C.info("请填写必要项目")},async load_data(){let e=new URLSearchParams;e.append("teacher_id",$cookies.get("teacher_id")),e.append("login",$cookies.get("login")),e.append("level",$cookies.get("level"));const{data:t}=await this.$http.post("/ajax/manage_folder_ajax/",e);this.data=t.data.data}},async mounted(){this.load_data()}}),x=c("p",null,"此操作将删除所选择的目录及其子目录、所有书签",-1),W=c("p",null,"此操作将删除所选择目录内的所有书签",-1),ee=c("div",{style:{"margin-top":"15px"}},null,-1),te={key:0},le={key:0},ae={key:2,src:Y,width:"20",height:"20"},oe={key:1},ne={key:0},ie=["onClick"],re=["onClick"],se={key:1},de=["onClick"],ue=["onClick"],pe=["onClick"],fe=["onClick"];function me(e,t,a,i,p,f){const j=m("a-modal"),H=m("plus-circle-outlined"),A=m("a-input"),y=m("a-select-option"),w=m("a-select"),k=m("a-button"),F=m("a-table"),M=m("home-outlined"),b=m("a-divider"),B=m("a-form-item"),K=m("a-form"),N=m("a-drawer");return n(),d(h,null,[r(j,{visible:e.prompt_visible,"onUpdate:visible":t[0]||(t[0]=l=>e.prompt_visible=l),title:"操作确认","ok-text":"确认","cancel-text":"取消",onOk:t[1]||(t[1]=l=>e.submitModify("删除"))},{default:o(()=>[x]),_:1},8,["visible"]),r(j,{visible:e.empty_prompt_visible,"onUpdate:visible":t[2]||(t[2]=l=>e.empty_prompt_visible=l),title:"操作确认","ok-text":"确认","cancel-text":"取消",onOk:t[3]||(t[3]=l=>e.submitModify("清空"))},{default:o(()=>[W]),_:1},8,["visible"]),ee,r(F,{columns:e.columns_addnew,"data-source":e.data_addnew,pagination:!1},{headerCell:o(({column:l})=>[]),bodyCell:o(({column:l,record:u})=>[l.title=="添加目录"?(n(),_(H,{key:0})):l.title=="目录名称"?(n(),_(A,{key:1,value:e.new_folder_name,"onUpdate:value":t[4]||(t[4]=s=>e.new_folder_name=s)},null,8,["value"])):l.title=="父目录"?(n(),d(h,{key:2},[e.data?(n(),_(w,{key:0,style:{width:"160px"},value:e.new_father_id,"onUpdate:value":t[5]||(t[5]=s=>e.new_father_id=s)},{default:o(()=>[(n(!0),d(h,null,I(e.data,s=>(n(),_(y,{value:s.value,lv:s.lv},{default:o(()=>[v(Q(s.label),1)]),_:2},1032,["value","lv"]))),256))]),_:1},8,["value"])):g("",!0)],64)):l.title=="操作"?(n(),_(k,{key:3,type:"primary",onClick:t[6]||(t[6]=s=>e.newFolder())},{default:o(()=>[v("添加")]),_:1})):g("",!0)]),_:1},8,["columns","data-source"]),e.data?(n(),_(F,{key:0,columns:e.columns,"data-source":e.data,pagination:!1},{headerCell:o(({column:l})=>[l.title=="lv"?(n(),d("span",te,"已有目录")):g("",!0)]),bodyCell:o(({column:l,record:u})=>[l.title==="lv"?(n(),d(h,{key:0},[u.lv==-1?(n(),d("span",le,[r(M)])):g("",!0),u.lv>-1?(n(!0),d(h,{key:1},I(u.lv+1,s=>(n(),d("span",null,"      "))),256)):g("",!0),u.lv>-1?(n(),d("img",ae)):g("",!0)],64)):l.title==="目录名称"?(n(),d(h,{key:1},[u.lv==-2?(n(),_(A,{key:0,value:e.new_folder_name,"onUpdate:value":t[7]||(t[7]=s=>e.new_folder_name=s)},null,8,["value"])):(n(),d("span",oe,Q(u.label),1))],64)):l.title==="操作"?(n(),d(h,{key:2},[u.lv==-1?(n(),d("span",ne,[c("a",{onClick:s=>e.emptyFolder(u.value)},"清空",8,ie),r(b,{type:"vertical"}),c("a",{onClick:s=>e.deleteFolder(u.value)},"删除",8,re)])):(n(),d("span",se,[c("a",{onClick:s=>e.editFolder(u.value,u.name,u.father_id)},"修改",8,de),r(b,{type:"vertical"}),c("a",{onClick:s=>e.moveBookmark(u.value)},"移动",8,ue),r(b,{type:"vertical"}),c("a",{onClick:s=>e.emptyFolder(u.value)},"清空",8,pe),r(b,{type:"vertical"}),c("a",{onClick:s=>e.deleteFolder(u.value)},"删除",8,fe)]))],64)):g("",!0)]),_:1},8,["columns","data-source"])):g("",!0),r(N,{width:"100%",title:"修改目录",placement:"bottom",visible:e.visible,onClose:e.closeDrawer},{extra:o(()=>[r(k,{type:"primary",danger:"",onClick:t[8]||(t[8]=l=>e.addBookmark(e.editId,"删除"))},{default:o(()=>[v("删除")]),_:1})]),default:o(()=>[r(K,{name:"basic","label-col":{span:2},"wrapper-col":{span:22},autocomplete:"off"},{default:o(()=>[r(B,{label:"目录名",name:"username"},{default:o(()=>[r(A,{value:e.folder_name,"onUpdate:value":t[9]||(t[9]=l=>e.folder_name=l)},null,8,["value"])]),_:1}),r(B,{label:"父目录",name:"xxx"},{default:o(()=>[e.folder_data?(n(),_(w,{key:0,style:{width:"100%"},value:e.father_id,"onUpdate:value":t[10]||(t[10]=l=>e.father_id=l)},{default:o(()=>[(n(!0),d(h,null,I(e.folder_data,l=>(n(),_(y,{value:l.value,lv:l.lv,disabled:l.disabled},{default:o(()=>[v(Q(l.label),1)]),_:2},1032,["value","lv","disabled"]))),256))]),_:1},8,["value"])):g("",!0)]),_:1}),r(B,{"wrapper-col":{offset:2,span:22}},{default:o(()=>[r(k,{type:"primary",onClick:t[11]||(t[11]=l=>e.submitModify("修改"))},{default:o(()=>[v("提交")]),_:1}),v("   "),r(k,{style:{"margin-right":"8px"},onClick:e.closeDrawer},{default:o(()=>[v("取消")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["visible","onClose"]),r(N,{width:"100%",title:"移动书签",placement:"bottom",visible:e.movebookmark_drawer_visible,onClose:e.close_movebookmark_drawer},{default:o(()=>[r(K,{name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off"},{default:o(()=>[r(B,{label:"本目录内书签移动到："},{default:o(()=>[e.data?(n(),_(w,{key:0,style:{width:"100%"},value:e.father_id,"onUpdate:value":t[12]||(t[12]=l=>e.father_id=l)},{default:o(()=>[(n(!0),d(h,null,I(e.data,l=>(n(),_(y,{value:l.value,lv:l.lv},{default:o(()=>[v(Q(l.label),1)]),_:2},1032,["value","lv"]))),256))]),_:1},8,["value"])):g("",!0)]),_:1}),r(B,{"wrapper-col":{offset:4,span:20}},{default:o(()=>[r(k,{type:"primary",onClick:t[13]||(t[13]=l=>e.submitModify("移动"))},{default:o(()=>[v("提交")]),_:1}),v("   "),r(k,{style:{"margin-right":"8px"},onClick:e.close_movebookmark_drawer},{default:o(()=>[v("取消")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["visible","onClose"])],64)}const _e=U(G,[["render",me]]),ge={__name:"ManageView",setup(e){return(t,a)=>(n(),d("div",null,[r(_e)]))}};export{ge as default};
